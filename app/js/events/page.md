---
title: События
---

## Введение в обработку событий

Обработка событий в JavaScript позволяет программам реагировать на действия пользователя, такие как клики мышью, нажатия клавиш, движение мыши и другие взаимодействия с веб-страницей. Для этого используется метод `addEventListener()`, который позволяет "подписаться" на определённые события и выполнить заданную функцию, когда это событие произойдёт.

```js
const button = document.getElementById('myButton');
button.addEventListener('click', function() {
	alert('Кнопка нажата!');
});
```

## Обработчики событий

Обработчики событий это функции, которые выполняются, когда происходит определённое событие, например, клик мыши, нажатие клавиши или изменение элемента.

```js
function handleClick() {
	console.log('Кнопка нажата!');
}

const button = document.getElementById('myButton');
button.addEventListener('click', handleClick);
```

## Передача данных в обработчик события

Каждое событие в JavaScript сопровождается объектом `Event`, который содержит информацию о событии: тип события, целевой элемент, координаты и другие данные. Этот объект автоматически передаётся в обработчик, где его можно использовать.

```js
const button = document.getElementById('myButton');
button.addEventListener('click', function(event) {
	console.log('Тип события:', event.type); // "click"
	console.log('Целевой элемент:', event.target); // выведет кнопку
});
```

## Распространение событий

События в DOM распространяются в два этапа:
- Фаза захвата - событие передается от корня DOM до целевого элемента.
- Фаза всплытия - событие идет от целевого элемента обратно к корню DOM.

```js
document.getElementById('parent').addEventListener('click', function() {
	console.log('Родительский элемент');
}, true); // true указывает на фазу захвата

document.getElementById('child').addEventListener('click', function() {
	console.log('Дочерний элемент');
});
```

> [!TIP]
> 
> **Как это работает**
> 
> - В фазе **захвата** обработчик на родительском элементе сработает первым, до того как событие достигнет дочернего элемента.
> - В фазе **всплытия** событие будет сначала обрабатываться на дочернем элементе, а затем на родительском.

## События мыши

JavaScript предоставляет различные события мыши для отслеживания действий пользователя, такие как `click`, `dblclick`, `mousedown`, `mouseup`, `mousemove`, `mouseenter`, `mouseleave` и другие.

```js
const element = document.getElementById('myElement');
element.addEventListener('click', function() {
	console.log('Элемент был кликнут!');
});
```

## События клавиатуры

JavaScript предоставляет следующие события для отслеживания действий клавиш:
- `keydown` - срабатывает при нажатии клавиши.
- `keypress` - срабатывает, когда нажата клавиша, производящая символ (например, буквенные клавиши).
- `keyup` - срабатывает при отпускании клавиши.

```js
document.addEventListener('keydown', function(event) {
	console.log('Нажата клавиша:', event.key);
});
```

## Программный вызов событий

В JavaScript можно программно вызвать событие с помощью метода `dispatchEvent`. Это позволяет инициировать событие без участия пользователя.

```js
const event = new Event('myCustomEvent');
document.dispatchEvent(event);
```

## Определение своих событий

С помощью конструктора `CustomEvent` можно создавать пользовательские события с дополнительными данными, которые можно передавать через свойство `detail`. Это полезно, когда нужно делиться информацией между различными частями приложения.

```js
// создаем пользовательское событие с данными
const event = new CustomEvent('myCustomEvent', {
	detail: { message: 'Привет, мир!' }
});

// обработчик события
document.addEventListener('myCustomEvent', function(event) {
	console.log(event.detail.message); // "Привет, мир!"
});

// программно вызываем событие
document.dispatchEvent(event);
```

> [!TIP]
> 
> **Как это работает**
> 
> - `CustomEvent` позволяет добавлять произвольные данные в событие.
> - `detail` доступно в обработчике события и позволяет работать с этими данными.